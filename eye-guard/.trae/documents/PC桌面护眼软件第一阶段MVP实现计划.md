# PC桌面护眼软件第一阶段MVP实现计划

## 一、项目结构调整

### 1. 目录结构优化
- 创建 `Core` 文件夹，包含核心逻辑
- 创建 `UI` 文件夹，包含界面相关代码
- 创建 `Utils` 文件夹，包含工具类

### 2. 依赖管理
- 添加 `Vanara.PInvoke.User32` 用于系统托盘和窗口管理
- 添加 `System.Timers` 用于计时功能

## 二、核心功能实现

### 1. 定时器管理
- 实现 `TimerManager` 类，用于管理定时黑屏功能
- 支持固定间隔（30分钟）的计时
- 计时结束触发黑屏事件

### 2. 屏幕控制
- 实现 `ScreenController` 类，用于控制黑屏功能
- 创建全屏黑色窗口，覆盖所有显示器
- 实现黑屏持续1分钟的逻辑
- 1分钟后允许用户手动解除黑屏

### 3. 系统托盘
- 实现 `TrayIcon` 类，用于系统托盘功能
- 添加托盘图标和基本菜单
- 支持从托盘控制应用程序

## 三、UI设计

### 1. 主窗口
- 简化主窗口设计，显示基本状态信息
- 添加开始/暂停按钮
- 显示剩余时间

### 2. 黑屏窗口
- 创建全屏黑色窗口，覆盖所有显示器
- 实现强制休息逻辑，期间无法操作
- 添加倒计时显示
- 1分钟后显示解除按钮

## 四、功能特性

### 1. 基础计时功能
- 固定30分钟间隔的定时黑屏
- 可手动开始/暂停计时

### 2. 黑屏控制
- 全屏黑色窗口覆盖所有显示器
- 强制休息1分钟
- 1分钟后可手动解除

### 3. 系统托盘
- 系统托盘图标显示
- 基本控制菜单
- 应用程序状态指示

## 五、实现步骤

1. **项目结构调整**：创建必要的文件夹结构
2. **依赖添加**：添加所需的NuGet包
3. **核心功能实现**：实现定时器和屏幕控制逻辑
4. **UI实现**：设计主窗口和黑屏窗口
5. **系统托盘实现**：添加系统托盘功能
6. **测试和调试**：确保功能正常运行

## 六、技术要点

- 使用 `System.Timers.Timer` 实现计时功能
- 使用 `Vanara.PInvoke.User32` 实现系统托盘和窗口管理
- 使用 WPF 实现界面设计
- 确保多显示器支持
- 保持低资源占用

## 七、第一阶段交付物

- 基础计时功能
- 简单的黑屏控制
- 系统托盘图标
- 可运行的Windows桌面应用程序