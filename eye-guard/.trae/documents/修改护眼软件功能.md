# 护眼软件功能修改计划

## 1. 默认隐藏主窗口，仅在托盘运行
- **修改文件**：`MainWindow.xaml.cs`
- **实现方法**：在构造函数中初始化完成后，添加代码隐藏窗口并从任务栏移除
  ```csharp
  this.Visibility = Visibility.Hidden;
  this.ShowInTaskbar = false;
  ```

## 2. 移除托盘菜单中的"开始计时"选项
- **修改文件**：`TrayIcon.cs`
- **实现方法**：在`InitializeContextMenu`方法中删除创建"开始计时"菜单项的代码

## 3. 修改托盘菜单"暂停计时"为推迟黑屏功能
- **修改文件**：
  - `TimerManager.cs`：添加`AddTime`方法
  - `MainWindow.xaml.cs`：更新事件处理逻辑
- **实现方法**：
  1. 在`TimerManager`中添加`AddTime(int minutes)`方法，用于增加剩余时间
  2. 在`MainWindow`中修改托盘"暂停计时"事件处理，调用`AddTime(1)`并显示推迟消息

## 4. 添加"立即休息"选项到托盘菜单
- **修改文件**：
  - `TrayIcon.cs`：添加新菜单项和事件
  - `MainWindow.xaml.cs`：添加事件处理
- **实现方法**：
  1. 在`TrayIcon`中添加`ImmediateRest`事件
  2. 在`InitializeContextMenu`中添加"立即休息"菜单项
  3. 在`MainWindow`中处理该事件，触发黑屏并重置计时器

## 具体修改步骤
1. 修改`TimerManager.cs`，添加`AddTime`方法
2. 修改`TrayIcon.cs`，移除"开始计时"菜单项，添加"立即休息"菜单项和事件
3. 修改`MainWindow.xaml.cs`，实现窗口隐藏、更新暂停计时处理逻辑、添加立即休息事件处理

## 预期效果
- 软件启动后自动隐藏主窗口，仅显示托盘图标
- 托盘菜单中无"开始计时"选项
- 点击"暂停计时"会推迟休息1分钟
- 点击"立即休息"会立即触发黑屏并重置休息倒计时
